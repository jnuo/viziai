{
  "project": "ViziAI Phase 1 - Ship the Free Product",
  "branch": "ralph/phase-1-ship-free-product",
  "created": "2026-02-28",
  "qualityChecks": {
    "typecheck": "cd web && npm run typecheck",
    "lint": "cd web && npm run lint",
    "test": "cd web && npm run test",
    "build": "cd web && npm run build"
  },
  "stories": [
    {
      "id": "STORY-000",
      "title": "Vercel domain migration to viziai.app",
      "description": "Migrate Vercel production config to viziai.app. Steps: (1) Update NEXTAUTH_URL production env var to https://www.viziai.app using: cd web && echo -n 'https://www.viziai.app' | npx vercel env add NEXTAUTH_URL production --force. (2) Verify staging.viziai.app is configured (already added as domain, NEXTAUTH_URL preview already set to https://staging.viziai.app). (3) Verify the app loads at https://www.viziai.app and https://staging.viziai.app after next deploy. NOTE: User must manually do two things: (a) In Vercel Dashboard → Project → Settings → Domains → staging.viziai.app → assign to git branch 'ralph/phase-1-ship-free-product'. (b) In Google Cloud Console → add two callback URLs: https://www.viziai.app/api/auth/callback/google AND https://staging.viziai.app/api/auth/callback/google.",
      "acceptanceCriteria": [
        "NEXTAUTH_URL production env var is set to https://www.viziai.app",
        "staging.viziai.app domain points to ralph branch preview deploys",
        "Build passes"
      ],
      "files": [],
      "priority": 0,
      "status": "todo",
      "dependencies": [],
      "requiresUserApproval": true,
      "checkpointReason": "User must: (1) Assign staging.viziai.app to ralph branch in Vercel Dashboard, (2) Add OAuth callback URLs for viziai.app AND staging.viziai.app in Google Cloud Console"
    },
    {
      "id": "STORY-001",
      "title": "Add typecheck script",
      "description": "Add \"typecheck\": \"tsc --noEmit\" to web/package.json scripts section.",
      "acceptanceCriteria": [
        "web/package.json has \"typecheck\": \"tsc --noEmit\" in scripts",
        "Running `cd web && npm run typecheck` passes with zero errors"
      ],
      "files": ["web/package.json"],
      "priority": 1,
      "status": "done",
      "dependencies": []
    },
    {
      "id": "STORY-002",
      "title": "Add German locale",
      "description": "Add German (de) to the i18n system. Update web/src/i18n/config.ts to include 'de' in the locales array with label 'Deutsch' and BCP47 'de-DE'. Create web/messages/de.json with all keys translated to German, matching the exact structure of en.json.",
      "acceptanceCriteria": [
        "'de' is in the locales array in web/src/i18n/config.ts",
        "Label is 'Deutsch', BCP47 is 'de-DE'",
        "web/messages/de.json exists with all keys from en.json translated to German",
        "Key structure is identical to en.json (no missing or extra keys)",
        "Build passes with no missing key errors"
      ],
      "files": ["web/src/i18n/config.ts", "web/messages/de.json"],
      "priority": 1,
      "status": "done",
      "dependencies": []
    },
    {
      "id": "STORY-003",
      "title": "Add French locale",
      "description": "Add French (fr) to the i18n system. Update web/src/i18n/config.ts to include 'fr' in the locales array with label 'Francais' and BCP47 'fr-FR'. Create web/messages/fr.json with all keys translated to French, matching the exact structure of en.json.",
      "acceptanceCriteria": [
        "'fr' is in the locales array in web/src/i18n/config.ts",
        "Label is 'Francais', BCP47 is 'fr-FR'",
        "web/messages/fr.json exists with all keys from en.json translated to French",
        "Key structure is identical to en.json (no missing or extra keys)",
        "Build passes with no missing key errors"
      ],
      "files": ["web/src/i18n/config.ts", "web/messages/fr.json"],
      "priority": 1,
      "status": "done",
      "dependencies": []
    },
    {
      "id": "STORY-004",
      "title": "Report cap enforcement — backend",
      "description": "Add a 5-report-per-profile cap for free users. In the upload API (web/src/app/api/upload/route.ts), before creating a pending_uploads record, count existing reports (processed_files) for the target profile. If >= 5, return 403 with a clear error message. Add translation keys for cap-related messages to all 5 locale files.",
      "acceptanceCriteria": [
        "Upload API checks report count before allowing upload",
        "Returns 403 with i18n-ready message when profile has >= 5 reports",
        "New translation keys added to all 5 locale files (tr, en, es, de, fr)",
        "Existing upload flow works unchanged for profiles under the cap",
        "Build passes"
      ],
      "files": [
        "web/src/app/api/upload/route.ts",
        "web/messages/tr.json",
        "web/messages/en.json",
        "web/messages/es.json",
        "web/messages/de.json",
        "web/messages/fr.json"
      ],
      "priority": 2,
      "status": "done",
      "dependencies": ["STORY-002", "STORY-003"]
    },
    {
      "id": "STORY-005",
      "title": "Report cap enforcement — frontend upgrade prompt",
      "description": "Show report count and cap info in the UI. On the dashboard, show a badge like '3/5 reports' per profile. On the upload page, when a profile has hit the 5-report cap, show an inline message explaining the limit with a 'Pro coming soon' style note. Not a hard paywall — just informational.",
      "acceptanceCriteria": [
        "Dashboard shows report count per profile (e.g., '3/5 reports')",
        "Upload page shows cap message when profile has >= 5 reports",
        "Message is friendly and informational, not alarming",
        "Translation keys added to all 5 locale files",
        "Build passes"
      ],
      "files": [
        "web/src/app/upload/page.tsx",
        "web/src/app/dashboard/",
        "web/messages/*.json"
      ],
      "capabilities": ["frontend-design"],
      "priority": 2,
      "status": "todo",
      "dependencies": ["STORY-004"]
    },
    {
      "id": "STORY-006",
      "title": "German metric aliases migration",
      "description": "Create a SQL migration that inserts common German lab metric name aliases into the metric_aliases table, mapping them to Turkish canonical names. Research standard German lab report metric names (Laborwerte). Examples: 'Kalium' -> 'Potasyum', 'Natrium' -> 'Sodyum', 'Kreatinin' -> 'Kreatinin', 'Harnstoff' -> 'Ure', 'Blutzucker' -> 'Glukoz'. Cover at least 30 common metrics.",
      "acceptanceCriteria": [
        "Migration SQL file exists at db-schema/migrations/20260228_german_metric_aliases.sql",
        "Uses BEGIN/COMMIT transaction",
        "Inserts at least 30 German -> Turkish alias mappings",
        "Covers common CBC, metabolic panel, liver, kidney, thyroid, lipid metrics",
        "SQL is syntactically valid"
      ],
      "files": ["db-schema/migrations/20260228_german_metric_aliases.sql"],
      "priority": 2,
      "status": "done",
      "dependencies": []
    },
    {
      "id": "STORY-007",
      "title": "French metric aliases migration",
      "description": "Create a SQL migration that inserts common French lab metric name aliases into the metric_aliases table, mapping them to Turkish canonical names. Research standard French lab report metric names (analyses de sang). Examples: 'Potassium' -> 'Potasyum', 'Sodium' -> 'Sodyum', 'Creatinine' -> 'Kreatinin', 'Glycemie' -> 'Glukoz'. Cover at least 30 common metrics.",
      "acceptanceCriteria": [
        "Migration SQL file exists at db-schema/migrations/20260228_french_metric_aliases.sql",
        "Uses BEGIN/COMMIT transaction",
        "Inserts at least 30 French -> Turkish alias mappings",
        "Covers common CBC, metabolic panel, liver, kidney, thyroid, lipid metrics",
        "SQL is syntactically valid"
      ],
      "files": ["db-schema/migrations/20260228_french_metric_aliases.sql"],
      "priority": 2,
      "status": "done",
      "dependencies": []
    },
    {
      "id": "STORY-008",
      "title": "Privacy policy page",
      "description": "Create a /privacy route with multi-language privacy policy content. Cover: data collection, storage (Neon Postgres), AI processing (OpenAI), cookies, GDPR rights, data export/deletion, contact info. Simple, readable layout — not legalese. Add 'privacy' section to all 5 locale files. Link from the landing page footer.",
      "acceptanceCriteria": [
        "web/src/app/privacy/page.tsx exists and renders",
        "Privacy content added to all 5 locale files under a 'privacy' section",
        "/privacy renders correctly in all 5 languages",
        "Content covers: data collection, storage, AI processing, cookies, GDPR, data deletion, contact",
        "Landing page footer links to /privacy",
        "Build passes"
      ],
      "files": [
        "web/src/app/privacy/page.tsx",
        "web/messages/*.json",
        "web/src/app/page.tsx"
      ],
      "capabilities": ["frontend-design"],
      "priority": 3,
      "status": "todo",
      "dependencies": ["STORY-002", "STORY-003"]
    },
    {
      "id": "STORY-009",
      "title": "SEO meta tags + Open Graph + structured data",
      "description": "Add proper meta tags to root layout and key pages. Include Open Graph tags (title, description, image, type), Twitter card tags, and SoftwareApplication structured data (JSON-LD) on the landing page. Meta descriptions should be locale-aware using next-intl.",
      "acceptanceCriteria": [
        "Root layout has locale-aware meta title and description",
        "Landing page has Open Graph tags (og:title, og:description, og:image, og:type)",
        "Twitter card tags present (twitter:card, twitter:title, twitter:description)",
        "JSON-LD SoftwareApplication structured data on landing page",
        "Meta descriptions translated in all 5 locale files",
        "Build passes"
      ],
      "files": [
        "web/src/app/layout.tsx",
        "web/src/app/page.tsx",
        "web/messages/*.json"
      ],
      "priority": 4,
      "status": "todo",
      "dependencies": ["STORY-002", "STORY-003"]
    },
    {
      "id": "STORY-010",
      "title": "Blog infrastructure with locale-prefixed routing",
      "description": "Set up MDX blog with path-based locale routing for SEO. Install next-mdx-remote (or @next/mdx). URL structure: /[locale]/blog/[slug] where slugs are localized per language (e.g., /en/blog/track-blood-tests vs /de/blog/blutwerte-verfolgen vs /tr/blog/kan-testi-takibi). Articles are MDX files stored in web/content/blog/[locale]/ with frontmatter (title, description, locale, slug, publishedAt, tags, canonicalLocale). For translated articles (same content in multiple languages), set canonical URL to the English version. Market-specific articles exist only in their language. Blog listing page at /[locale]/blog/ shows only articles for that locale. Article layout: title, date, author, reading time, content, CTA to sign up. Add hreflang tags linking alternate language versions of the same article. Reference product/brand-guidelines/BRAND.md for all design decisions.",
      "acceptanceCriteria": [
        "MDX support installed and configured",
        "/[locale]/blog route shows article listing filtered by locale",
        "/[locale]/blog/[slug] route renders MDX content with localized slug",
        "hreflang tags present linking alternate language versions",
        "Translated articles have canonical URL pointing to English version",
        "Article layout has title, date, reading time, content, CTA",
        "Design follows product/brand-guidelines/BRAND.md",
        "Build passes"
      ],
      "files": [
        "web/src/app/[locale]/blog/",
        "web/next.config.ts",
        "web/package.json",
        "web/content/blog/"
      ],
      "capabilities": ["frontend-design"],
      "priority": 4,
      "status": "todo",
      "dependencies": ["STORY-001"]
    },
    {
      "id": "STORY-011",
      "title": "Landing page optimization",
      "description": "Redesign the landing page for conversion. viziai.app is the primary domain. Hero section with clear value prop, CTA 'Get Started Free', dashboard screenshot. Feature highlights: multi-language PDFs, family profiles, trend charts. 'How it works' section: 3 steps (upload, extract, track). Social proof placeholder. Bottom CTA. Responsive design. Use brand colors from product/brand-guidelines/BRAND.md.",
      "acceptanceCriteria": [
        "Landing page has hero with clear value prop and CTA",
        "Feature highlights section with key selling points",
        "How it works section with 3 steps",
        "Social proof placeholder section",
        "Bottom CTA section",
        "Responsive on mobile",
        "Uses brand colors (Teal primary, Coral secondary)",
        "Translation keys added to all 5 locale files",
        "Build passes"
      ],
      "files": ["web/src/app/page.tsx", "web/messages/*.json"],
      "capabilities": ["frontend-design"],
      "priority": 4,
      "status": "todo",
      "dependencies": ["STORY-002", "STORY-003"]
    },
    {
      "id": "STORY-012",
      "title": "Update Google Analytics for viziai.app",
      "description": "Replace the current GA4 Measurement ID (G-7SD063Z4ST) with G-TWM75R9VKP in web/src/app/layout.tsx. Stream: ViziAI, URL: https://www.viziai.app/, Stream ID: 13682442084. Add GA event tracking for key actions: upload started, signup completed, locale switched. The old GA property stays on the personal website unchanged.",
      "acceptanceCriteria": [
        "G-7SD063Z4ST replaced with G-TWM75R9VKP in layout.tsx",
        "GA event tracking added for: upload, signup, locale switch",
        "Build passes"
      ],
      "files": ["web/src/app/layout.tsx"],
      "priority": 4,
      "status": "todo",
      "dependencies": []
    },
    {
      "id": "STORY-013",
      "title": "First SEO article — Track Blood Tests Across Countries",
      "description": "Write the first blog article about tracking blood test results across countries. Create 5 MDX files with localized slugs — one per locale in web/content/blog/[locale]/. This is a translated article (same content in 5 languages), so set canonical to the English version. Localized slugs: en: 'track-blood-tests-across-countries', tr: 'kan-testi-sonuclarini-ulkeler-arasi-takip', es: 'seguimiento-analisis-sangre-entre-paises', de: 'blutwerte-laenderuebergreifend-verfolgen', fr: 'suivi-analyses-sang-entre-pays'. Content: how ViziAI handles multi-language lab reports, metric name normalization, tracking across countries. CTA: 'Upload your first blood test for free'. Use /writer-onur skill for content.",
      "acceptanceCriteria": [
        "5 MDX files exist in web/content/blog/ — one per locale with localized filename/slug",
        "Each has complete frontmatter (title, description, locale, slug, publishedAt, tags, canonicalLocale: 'en')",
        "Content is 800-1200 words per locale",
        "Includes CTA linking to signup",
        "Article renders at /en/blog/track-blood-tests-across-countries, /tr/blog/kan-testi-sonuclarini-ulkeler-arasi-takip, etc.",
        "hreflang tags link all 5 versions together",
        "Build passes"
      ],
      "files": ["web/content/blog/"],
      "capabilities": ["writer-onur"],
      "priority": 4,
      "status": "todo",
      "dependencies": ["STORY-010"]
    }
  ]
}
